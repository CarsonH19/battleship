(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{f:()=>p});class t{constructor(e){this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}class n{constructor(e=10){this.gridSize=e,this.grid=this.createGrid(),this.ships=[],this.missedAttacks=[]}createGrid(){return Array.from({length:this.gridSize},(()=>Array(this.gridSize).fill(null)))}renderGameBoard(e){const t=document.getElementById(e);t.innerHTML="";const n=document.createElement("table");for(let t=0;t<this.gridSize;t++){const o=document.createElement("tr");for(let n=0;n<this.gridSize;n++){const i=document.createElement("td");if(i.classList.add("cell"),i.id=`${t}-${n}`,"player-gameboard"===e){i.classList.add("player-cell");for(const e of this.ships)(e.horizontal&&t===e.x&&n>=e.y&&n<e.y+e.ship.length||!e.horizontal&&t>=e.x&&t<e.x+e.ship.length&&n===e.y)&&i.classList.add("ship")}else i.classList.add("computer-cell"),i.classList.add("blank");null===this.grid[t][n]?i.classList.add("blank"):"HIT"===this.grid[t][n]?i.classList.add("hit"):"MISS"===this.grid[t][n]&&i.classList.add("miss"),o.appendChild(i)}n.appendChild(o)}t.appendChild(n)}placeShip(e,t,n,o){if(console.log(e),console.log(t),console.log(n),console.log(o),p(e,t,n,o)){if(o)for(let o=0;o<e.length;o++)this.grid[t][n+o]=e;else for(let o=0;o<e.length;o++)console.log(e),console.log(this.grid),console.log(`${t+o}, ${n}`),this.grid[t+o][n]=e;this.ships.push({ship:e,x:t,y:n,horizontal:o}),console.log("Ship Placed!")}else alert("Please choose a valid location!")}receiveAttack(e,n){const o=this.grid[e][n];o instanceof t?(o.hit(),this.grid[e][n]="HIT"):(this.missedAttacks.push({x:e,y:n}),this.grid[e][n]="MISS"),console.log(this.grid[e][n])}allShipsSunk(){return this.ships.every((e=>e.ship.isSunk()))}}!function(){const e=document.querySelector(".orientation-btn");e.addEventListener("click",(()=>{"Horizontal"===e.textContent?e.textContent="Vertical":e.textContent="Horizontal",console.log("clicked")}))}();const o=document.getElementById("start-btn"),i=new n;function s(e){return new Promise((t=>{const n=document.querySelectorAll(".player-cell.blank");function o(){const t=this.id.split("-").map(Number),[n,o]=t;let i;if(i="Horizontal"===document.querySelector(".orientation-btn").textContent,i)for(let t=0;t<e.length;t++){const e=document.getElementById(`${n+t}-${o}`);e&&e.classList.add("highlight")}else for(let t=0;t<e.length;t++){const e=document.getElementById(`${n}-${o+t}`);e&&e.classList.add("highlight")}}function s(){document.querySelectorAll(".highlight").forEach((e=>{e.classList.remove("highlight")}))}function r(){const l=this.id.split("-").map(Number),[a,c]=l;let d;d="Horizontal"===document.querySelector(".orientation-btn").textContent,i.placeShip(e,a,c,d),n.forEach((e=>{e.removeEventListener("mouseover",o),e.removeEventListener("mouseout",s),e.removeEventListener("click",r)})),t()}n.forEach((e=>{e.addEventListener("mouseover",o),e.addEventListener("mouseout",s),e.addEventListener("click",r)}))}))}o.addEventListener("click",(()=>{const e=document.querySelector(".content");document.querySelector(".game-window").style.display="flex",e.style.display="none",async function(){let e=[new t(5),new t(4),new t(3),new t(3),new t(3),new t(2),new t(2)],n=!1;for(i.renderGameBoard("player-gameboard");e.length>0;)await s(e[0]),i.ships.includes(e[0])&&(console.log(i.ships),e.shift()),i.renderGameBoard("player-gameboard");for(document.querySelector(".orientation-btn").style.display="none";!n;){if(console.log("Player, choose a cell"),await new Promise((e=>{const t=document.querySelectorAll(".computer-cell.blank");function n(){const o=this.id.split("-").map(Number),[i,s]=o;r.receiveAttack(i,s),t.forEach((e=>{e.removeEventListener("click",n)})),e()}t.forEach((e=>{e.addEventListener("click",n)}))})),r.renderGameBoard("computer-gameboard"),r.allShipsSunk()){n=!0,alert("Player Wins!");break}if(await l(3e3),o(i),i.renderGameBoard("player-gameboard"),console.log("Computer attacks!"),i.allShipsSunk()){n=!0,alert("Computer Wins!");break}}function o(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());e.receiveAttack(t,n)}function l(e){return new Promise((t=>setTimeout(t,e)))}}()}));const r=new n,l=new t(5),a=new t(4),c=new t(3),d=new t(3),h=new t(3),u=new t(2),m=new t(2);function g(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());let o=Math.random()<.5;p(e,t,n,o)?(r.placeShip(e,t,n,o),console.log(`${t}, ${n}`)):g(e)}function p(e,t,n,o){if(o){if(n+e.length>10||t>=10)return!1;for(let o=n;o<n+e.length-1;o++)if(null!==r.grid[t][o])return!1}else{if(t+e.length>10||n>=10)return!1;for(let o=t;o<t+e.length-1;o++)if(null!==r.grid[o][n])return!1}return!0}g(l),g(a),g(c),g(d),g(h),g(u),g(m),console.log(r.grid)})();
//# sourceMappingURL=bundle.js.map