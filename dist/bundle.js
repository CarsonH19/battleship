(()=>{"use strict";class e{constructor(e){this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}class t{constructor(e=10){this.gridSize=e,this.grid=this.createGrid(),this.ships=[],this.missedAttacks=[]}createGrid(){return Array.from({length:this.gridSize},(()=>Array(this.gridSize).fill(null)))}renderGameBoard(e){const t=document.getElementById(e);t.innerHTML="";const i=document.createElement("table");for(let t=0;t<this.gridSize;t++){const s=document.createElement("tr");for(let i=0;i<this.gridSize;i++){const n=document.createElement("td");if(n.classList.add("cell"),n.id=`${t}-${i}`,"player-gameboard"===e){n.classList.add("player-cell");for(const e of this.ships)(e.horizontal&&t===e.x&&i>=e.y&&i<e.y+e.ship.length||!e.horizontal&&t>=e.x&&t<e.x+e.ship.length&&i===e.y)&&n.classList.add("ship")}else n.classList.add("computer-cell"),n.classList.add("blank");null===this.grid[t][i]?n.classList.add("blank"):"HIT"===this.grid[t][i]?n.classList.add("hit"):"MISS"===this.grid[t][i]&&n.classList.add("miss"),s.appendChild(n)}i.appendChild(s)}t.appendChild(i)}placeShip(e,t,i,s){if(s)for(let s=0;s<e.length;s++)this.grid[t][i+s]=e;else for(let s=0;s<e.length;s++)console.log(e),console.log(this.grid),console.log(`${t}, ${i}`),this.grid[t+s][i]=e;this.ships.push({ship:e,x:t,y:i,horizontal:s})}receiveAttack(t,i){const s=this.grid[t][i];s instanceof e?(s.hit(),this.grid[t][i]="HIT"):(this.missedAttacks.push({x:t,y:i}),this.grid[t][i]="MISS"),console.log(this.grid[t][i])}allShipsSunk(){return this.ships.every((e=>e.ship.isSunk()))}}document.getElementById("start-btn").addEventListener("click",(()=>{const e=document.querySelector(".content");document.querySelector(".game-window").style.display="flex",e.style.display="none",i.renderGameBoard("player-gameboard"),h.renderGameBoard("computer-gameboard"),async function(){let e=!1;for(;!e;){if(console.log("Player, choose a cell"),await new Promise((e=>{const t=document.querySelectorAll(".computer-cell.blank");function i(){const s=this.id.split("-").map(Number),[n,r]=s;h.receiveAttack(n,r),t.forEach((e=>{e.removeEventListener("click",i)})),e()}t.forEach((e=>{e.addEventListener("click",i)}))})),h.renderGameBoard("computer-gameboard"),h.allShipsSunk()){e=!0,alert("Player Wins!");break}if(await s(3e3),t(i),i.renderGameBoard("player-gameboard"),console.log("Computer attacks!"),i.allShipsSunk()){e=!0,alert("Computer Wins!");break}}function t(e){const t=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());e.receiveAttack(t,i)}function s(e){return new Promise((t=>setTimeout(t,e)))}}()}));const i=new t,s=new e(5),n=new e(4),r=new e(3),l=new e(3),o=new e(3),a=new e(2),c=new e(2);i.placeShip(s,1,5,!0),console.log(i.grid),i.placeShip(n,2,5,!0),i.placeShip(r,3,5,!0),i.placeShip(l,4,5,!0),i.placeShip(o,5,5,!0),i.placeShip(a,6,5,!0),i.placeShip(c,7,5,!0);const h=new t,d=new e(5),p=new e(4),u=new e(3),g=new e(3),m=new e(3),f=new e(2),S=new e(2);function y(e){const t=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());let s=Math.random()<.5;!function(t,i,s){if(s){if(i+e.length>10||t>=10)return!1;for(let s=i;s<i+e.length-1;s++)if(null!==h.grid[t][s])return!1}else{if(t+e.length>10||i>=10)return!1;for(let s=t;s<t+e.length-1;s++)if(null!==h.grid[s][i])return!1}return!0}(t,i,s)?y(e):(h.placeShip(e,t,i,s),console.log(`${t}, ${i}`))}console.log(h.grid),y(d),y(p),y(u),y(g),y(m),y(f),y(S),console.log(h.grid)})();
//# sourceMappingURL=bundle.js.map