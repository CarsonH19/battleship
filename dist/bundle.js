(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{f:()=>p});class t{constructor(e){this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}class n{constructor(e=10){this.gridSize=e,this.grid=this.createGrid(),this.ships=[],this.missedAttacks=[]}createGrid(){return Array.from({length:this.gridSize},(()=>Array(this.gridSize).fill(null)))}renderGameBoard(e){const t=document.getElementById(e);t.innerHTML="";const n=document.createElement("table");for(let t=0;t<this.gridSize;t++){const i=document.createElement("tr");for(let n=0;n<this.gridSize;n++){const o=document.createElement("td");if(o.classList.add("cell"),o.id=`${t}-${n}`,"player-gameboard"===e){o.classList.add("player-cell");for(const e of this.ships)(e.horizontal&&t===e.x&&n>=e.y&&n<e.y+e.ship.length||!e.horizontal&&t>=e.x&&t<e.x+e.ship.length&&n===e.y)&&o.classList.add("ship")}else o.classList.add("computer-cell"),o.classList.add("blank");null===this.grid[t][n]?o.classList.add("blank"):"HIT"===this.grid[t][n]?o.classList.add("hit"):"MISS"===this.grid[t][n]&&o.classList.add("miss"),i.appendChild(o)}n.appendChild(i)}t.appendChild(n)}placeShip(e,t,n,i){if(p(e,t,n,i)){if(i)for(let i=0;i<e.length;i++)console.log(`Vertical: ${t}, ${n+i}`),this.grid[t][n+i]=e;else for(let i=0;i<e.length;i++)console.log(`Horizontal: ${t+i}, ${n}`),this.grid[t+i][n]=e;this.ships.unshift({ship:e,x:t,y:n,horizontal:i}),console.log("Ship Placed!"),console.log(this.grid),console.log(this.ships)}else alert("Please choose a valid location!")}receiveAttack(e,n){const i=this.grid[e][n];i instanceof t?(i.hit(),this.grid[e][n]="HIT"):(this.missedAttacks.push({x:e,y:n}),this.grid[e][n]="MISS"),console.log(this.grid[e][n])}allShipsSunk(){return this.ships.every((e=>e.ship.isSunk()))}}!function(){const e=document.querySelector(".orientation-btn");e.addEventListener("click",(()=>{"Horizontal"===e.textContent?e.textContent="Vertical":e.textContent="Horizontal",console.log("clicked")}))}();const i=document.getElementById("start-btn"),o=new n;function r(e){return new Promise((t=>{const n=document.querySelectorAll(".player-cell.blank");function i(){const t=this.id.split("-").map(Number),[n,i]=t;let o;if(o="Horizontal"===document.querySelector(".orientation-btn").textContent,o)for(let t=0;t<e.length;t++){const e=document.getElementById(`${n}-${i+t}`);e&&e.classList.add("highlight")}else for(let t=0;t<e.length;t++){const e=document.getElementById(`${n+t}-${i}`);e&&e.classList.add("highlight")}}function r(){document.querySelectorAll(".highlight").forEach((e=>{e.classList.remove("highlight")}))}function s(){const l=this.id.split("-").map(Number),[a,c]=l;let d;d="Horizontal"===document.querySelector(".orientation-btn").textContent,o.placeShip(e,a,c,d),n.forEach((e=>{e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",r),e.removeEventListener("click",s)})),t()}n.forEach((e=>{e.addEventListener("mouseover",i),e.addEventListener("mouseout",r),e.addEventListener("click",s)}))}))}i.addEventListener("click",(()=>{const e=document.querySelector(".content");document.querySelector(".game-window").style.display="flex",e.style.display="none",async function(){let e=[new t(5),new t(4),new t(3),new t(3),new t(3),new t(2),new t(2)],n=!1;for(o.renderGameBoard("player-gameboard");e.length>0;)await r(e[0]),console.log(o.ships[0]),console.log(e[0]),o.ships[0].ship===e[0]&&e.shift(),o.renderGameBoard("player-gameboard");for(document.querySelector(".orientation-btn").style.display="none";!n;){if(await new Promise((e=>{const t=document.querySelectorAll(".computer-cell.blank");function n(){const i=this.id.split("-").map(Number),[o,r]=i;s.receiveAttack(o,r),t.forEach((e=>{e.removeEventListener("click",n)})),e()}t.forEach((e=>{e.addEventListener("click",n)}))})),s.renderGameBoard("computer-gameboard"),s.allShipsSunk()){n=!0,alert("Player Wins!");break}if(await l(3e3),i(o),o.renderGameBoard("player-gameboard"),o.allShipsSunk()){n=!0,alert("Computer Wins!");break}}function i(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());e.receiveAttack(t,n)}function l(e){return new Promise((t=>setTimeout(t,e)))}}()}));const s=new n,l=new t(5),a=new t(4),c=new t(3),d=new t(3),h=new t(3),u=new t(2),m=new t(2);function g(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());let i=Math.random()<.5;p(e,t,n,i,s)?s.placeShip(e,t,n,i):g(e)}function p(e,t,n,i,r=o){if(i){if(n+e.length-1>9||t>=9)return!1;for(let i=n;i<n+e.length-1;i++)if(null!==r.grid[t][i])return!1}else{if(t+e.length-1>9||n>=9)return!1;for(let i=t;i<t+e.length-1;i++)if(null!==r.grid[i][n])return!1}return!0}g(l),g(a),g(c),g(d),g(h),g(u),g(m)})();
//# sourceMappingURL=bundle.js.map