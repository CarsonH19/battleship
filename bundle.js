(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{cI:()=>d,fZ:()=>S,Wz:()=>a});class t{constructor(e){this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}function n(e,t,n,i,r=a){if(i){if(n+e.length-1>=10||t>=10)return!1;for(let i=n;i<n+e.length-1;i++)if(null!==r.grid[t][i])return!1}else{if(t+e.length-1>=10||n>=10)return!1;for(let i=t;i<t+e.length-1;i++)if(null!==r.grid[i][n])return!1}return!0}class i{constructor(e=10){this.gridSize=e,this.grid=this.createGrid(),this.ships=[],this.missedAttacks=[]}createGrid(){return Array.from({length:this.gridSize},(()=>Array(this.gridSize).fill(null)))}renderGameBoard(e){const t=document.getElementById(e);t.innerHTML="";const n=document.createElement("table");for(let t=0;t<this.gridSize;t++){const i=document.createElement("tr");for(let n=0;n<this.gridSize;n++){const r=document.createElement("td");if(r.classList.add("cell"),r.id=`${t}-${n}`,"player-gameboard"===e){r.classList.add("player-cell");for(const e of this.ships)(e.horizontal&&t===e.x&&n>=e.y&&n<e.y+e.ship.length||!e.horizontal&&t>=e.x&&t<e.x+e.ship.length&&n===e.y)&&r.classList.add("ship")}else r.classList.add("computer-cell"),r.classList.add("blank");null===this.grid[t][n]?r.classList.add("blank"):"HIT"===this.grid[t][n]?r.classList.add("hit"):"MISS"===this.grid[t][n]&&r.classList.add("miss"),i.appendChild(r)}n.appendChild(i)}t.appendChild(n)}placeShip(e,t,i,r){if(n(e,t,i,r)){if(r)for(let n=0;n<e.length;n++)console.log(`Vertical: ${t}, ${i+n}`),this.grid[t][i+n]=e;else for(let n=0;n<e.length;n++)console.log(`Horizontal: ${t+n}, ${i}`),this.grid[t+n][i]=e;this.ships.unshift({ship:e,x:t,y:i,horizontal:r}),console.log("Ship Placed!"),console.log(this.grid),console.log(this.ships)}else alert("Please choose a valid location!")}receiveAttack(e,n){const i=this.grid[e][n];i instanceof t?(i.hit(),this.grid[e][n]="HIT"):(this.missedAttacks.push({x:e,y:n}),this.grid[e][n]="MISS"),console.log(this.grid[e][n])}allShipsSunk(){return this.ships.every((e=>e.ship.isSunk()))}}function r(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());e.receiveAttack(t,n)}function o(e){const t=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());let r=Math.random()<.5;n(e,t,i,r,d)?d.placeShip(e,t,i,r):o(e)}function s(e){return new Promise((t=>{const n=document.querySelectorAll(".computer-cell.blank");function i(){const r=this.id.split("-").map(Number),[o,s]=r;e.receiveAttack(o,s),n.forEach((e=>{e.removeEventListener("click",i)})),t()}n.forEach((e=>{e.addEventListener("click",i)}))}))}function l(e){return new Promise((t=>{const n=document.querySelectorAll(".player-cell.blank");function i(){const t=this.id.split("-").map(Number),[n,i]=t;let r;if(r="Horizontal"===document.querySelector(".orientation-btn").textContent,r)for(let t=0;t<e.length;t++){const e=document.getElementById(`${n}-${i+t}`);e&&e.classList.add("highlight")}else for(let t=0;t<e.length;t++){const e=document.getElementById(`${n+t}-${i}`);e&&e.classList.add("highlight")}}function r(){document.querySelectorAll(".highlight").forEach((e=>{e.classList.remove("highlight")}))}function o(){const s=this.id.split("-").map(Number),[l,c]=s;let d;d="Horizontal"===document.querySelector(".orientation-btn").textContent,a.placeShip(e,l,c,d),n.forEach((e=>{e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",r),e.removeEventListener("click",o)})),t()}n.forEach((e=>{e.addEventListener("mouseover",i),e.addEventListener("mouseout",r),e.addEventListener("click",o)}))}))}document.getElementById("start-btn").addEventListener("click",(()=>{const e=document.querySelector(".content");document.querySelector(".game-window").style.display="flex",e.style.display="none",S()})),function(){const e=document.querySelector(".orientation-btn");e.addEventListener("click",(()=>{"Horizontal"===e.textContent?e.textContent="Vertical":e.textContent="Horizontal"}))}();const a=new i;let c=[new t(5),new t(4),new t(3),new t(3),new t(3),new t(2),new t(2)];const d=new i,h=new t(5),u=new t(4),m=new t(3),g=new t(3),f=new t(3),p=new t(2),y=new t(2);async function S(){let e=!1;for(a.renderGameBoard("player-gameboard");c.length>0;)await l(c[0]),a.ships[0].ship===c[0]&&c.shift(),a.renderGameBoard("player-gameboard");for(document.querySelector(".orientation-btn").style.display="none",d.renderGameBoard("computer-gameboard");!e;){if(await s(d),d.renderGameBoard("computer-gameboard"),d.allShipsSunk()){e=!0,alert("Player Wins!");break}if(await t(2e3),r(a),a.renderGameBoard("player-gameboard"),a.allShipsSunk()){e=!0,alert("Computer Wins!");break}}function t(e){return new Promise((t=>setTimeout(t,e)))}}o(h),o(u),o(m),o(g),o(f),o(p),o(y)})();
//# sourceMappingURL=bundle.js.map