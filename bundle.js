(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){document.querySelector(".text-box").innerText=e}e.d({},{cI:()=>h,fZ:()=>k,Wz:()=>c,wC:()=>b});class n{constructor(e,t){this.name=e,this.length=t,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(t(`${b} ${this.name} has sunk!`),this.sunk=!0)}isSunk(){return this.sunk}}function i(e,t,n,i,r=c){if(i){if(n+e.length-1>=10||t>=10)return!1;for(let i=n;i<n+e.length-1;i++)if(null!==r.grid[t][i])return!1}else{if(t+e.length-1>=10||n>=10)return!1;for(let i=t;i<t+e.length-1;i++)if(null!==r.grid[i][n])return!1}return!0}class r{constructor(e=10){this.gridSize=e,this.grid=this.createGrid(),this.ships=[],this.missedAttacks=[]}createGrid(){return Array.from({length:this.gridSize},(()=>Array(this.gridSize).fill(null)))}renderGameBoard(e){const t=document.getElementById(e);t.innerHTML="";const n=document.createElement("table");for(let t=0;t<this.gridSize;t++){const i=document.createElement("tr");for(let n=0;n<this.gridSize;n++){const r=document.createElement("td");if(r.classList.add("cell"),r.id=`${t}-${n}`,"player-gameboard"===e){r.classList.add("player-cell");for(const e of this.ships)(e.horizontal&&t===e.x&&n>=e.y&&n<e.y+e.ship.length||!e.horizontal&&t>=e.x&&t<e.x+e.ship.length&&n===e.y)&&r.classList.add("ship")}else r.classList.add("computer-cell"),r.classList.add("blank");null===this.grid[t][n]?r.classList.add("blank"):"HIT"===this.grid[t][n]?r.classList.add("hit"):"MISS"===this.grid[t][n]&&r.classList.add("miss"),i.appendChild(r)}n.appendChild(i)}t.appendChild(n)}placeShip(e,n,r,s){if(i(e,n,r,s)){if(s)for(let t=0;t<e.length;t++)console.log(`Vertical: ${n}, ${r+t}`),this.grid[n][r+t]=e;else for(let t=0;t<e.length;t++)console.log(`Horizontal: ${n+t}, ${r}`),this.grid[n+t][r]=e;this.ships.unshift({ship:e,x:n,y:r,horizontal:s}),t(`${e.name} placed!`)}else alert("Please choose a valid location!")}receiveAttack(e,i){const r=this.grid[e][i];r instanceof n?(t("Hit!"),r.hit(),this.grid[e][i]="HIT"):(this.missedAttacks.push({x:e,y:i}),t("Miss!"),this.grid[e][i]="MISS"),console.log(this.grid[e][i])}allShipsSunk(){return this.ships.every((e=>e.ship.isSunk()))}}function s(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());e.receiveAttack(t,n)}function o(e){const t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());let r=Math.random()<.5;i(e,t,n,r,h)?h.placeShip(e,t,n,r):o(e)}function a(e){return new Promise((t=>{const n=document.querySelectorAll(".computer-cell.blank");function i(){const r=this.id.split("-").map(Number),[s,o]=r;e.receiveAttack(s,o),n.forEach((e=>{e.removeEventListener("click",i)})),t()}n.forEach((e=>{e.addEventListener("click",i)}))}))}function l(e){return new Promise((t=>{const n=document.querySelectorAll(".player-cell.blank");function i(){const t=this.id.split("-").map(Number),[n,i]=t;let r;if(r="Horizontal"===document.querySelector(".orientation-btn").textContent,r)for(let t=0;t<e.length;t++){const e=document.getElementById(`${n}-${i+t}`);e&&e.classList.add("highlight")}else for(let t=0;t<e.length;t++){const e=document.getElementById(`${n+t}-${i}`);e&&e.classList.add("highlight")}}function r(){document.querySelectorAll(".highlight").forEach((e=>{e.classList.remove("highlight")}))}function s(){const o=this.id.split("-").map(Number),[a,l]=o;let d;d="Horizontal"===document.querySelector(".orientation-btn").textContent,c.placeShip(e,a,l,d),n.forEach((e=>{e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",r),e.removeEventListener("click",s)})),t()}n.forEach((e=>{e.addEventListener("mouseover",i),e.addEventListener("mouseout",r),e.addEventListener("click",s)}))}))}document.getElementById("start-btn").addEventListener("click",(()=>{const e=document.querySelector(".content");document.querySelector(".game-window").style.display="flex",e.style.display="none",k()})),function(){const e=document.querySelector(".orientation-btn");e.addEventListener("click",(()=>{"Horizontal"===e.textContent?e.textContent="Vertical":e.textContent="Horizontal"}))}();const c=new r;let d=[new n("Carrier",5),new n("Battleship",4),new n("Cruiser",3),new n("Submarine",3),new n("Submarine",3),new n("Destroyer",2),new n("Destroyer",2)];const h=new r,u=new n("Carrier",5),m=new n("Battleship",4),p=new n("Cruiser",3),f=new n("Submarine",3),g=new n("Submarine",3),y=new n("Destroyer",2),S=new n("Destroyer",2);let b="Your";async function k(){let e=!1;for(c.renderGameBoard("player-gameboard"),t("Admiral, ready your ships.");d.length>0;)await l(d[0]),c.ships[0].ship===d[0]&&d.shift(),c.renderGameBoard("player-gameboard");for(document.querySelector(".orientation-btn").style.display="none",document.querySelector(".boards-container").style.justifyContent="space-evenly",h.renderGameBoard("computer-gameboard");!e;){if(b="Your",t("Admiral, where shall you strike?"),await a(h),h.renderGameBoard("computer-gameboard"),await n(1500),h.allShipsSunk()){t("All enemy ships have sunk! Mission accomplished!"),e=!0,alert("Player Wins!");break}if(b="The enemy",t("Enemy attack incoming!"),await n(1500),s(c),c.renderGameBoard("player-gameboard"),await n(1500),c.allShipsSunk()){t("All your ships have sunk! Mission failed!"),e=!0,alert("Computer Wins!");break}}function n(e){return new Promise((t=>setTimeout(t,e)))}}o(u),o(m),o(p),o(f),o(g),o(y),o(S)})();
//# sourceMappingURL=bundle.js.map